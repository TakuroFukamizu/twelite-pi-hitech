<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>IoT BOX</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/jquery-3.3.1.min.js"></script>
<script>
$(function() {
  var socket = io.connect();
  var prevValue = undefined;
  socket.on('msg', function(data) {
    console.log(data);
    var date = new Date();
    var di0 = data.digialIn[0];
    var str = date.toString() + "デジタルIO-0:" + di0;

    var isOpen = false;
    if ( prevValue !== undefined && prevValue === di0) {
      isOpen = di0 ? false : true;
      console.info(isOpen);
    }
    prevValue = di0;
    $('div#status').text(isOpen ? 'OPEN' : 'CLOSE');

    $('div#current').text(str);
  });
});
</script>
</head>
<body>
  <div id="status"></div>
  <div id="current"></div>
</body>
</html>